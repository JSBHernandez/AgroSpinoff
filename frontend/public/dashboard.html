<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - AgroTechNova</title>
    <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo">
                <h1>AgroTechNova</h1>
                <p>Universidad Pontificia Bolivariana</p>
            </div>
            <nav>
                <ul>
                    <li><a href="dashboard.html">Dashboard</a></li>
                    <li><a href="proyectos.html">Proyectos</a></li>
                    <li><a href="reportes.html">Reportes</a></li>
                    <li><a href="#" id="logoutBtn">Cerrar Sesión</a></li>
                </ul>
            </nav>
            <div class="user-info">
                <span id="userName">Usuario</span>
                <span id="userRole">Rol</span>
            </div>
        </div>
    </header>

    <main>
        <section class="dashboard-container">
            <div class="dashboard-header">
                <h2>Panel de Control</h2>
                <p>Bienvenido al sistema de gestión agroindustrial</p>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-card">
                    <h3>Mis Proyectos</h3>
                    <div class="card-content">
                        <div class="stat-number" id="totalProjects">0</div>
                        <p>Proyectos activos</p>
                        <a href="proyectos.html" class="card-link">Ver todos</a>
                    </div>
                </div>

                <div class="dashboard-card">
                    <h3>Asesorías Pendientes</h3>
                    <div class="card-content">
                        <div class="stat-number" id="pendingAdvice">0</div>
                        <p>Solicitudes pendientes</p>
                        <a href="asesorias.html" class="card-link">Gestionar</a>
                    </div>
                </div>

                <div class="dashboard-card">
                    <h3>Presupuesto Total</h3>
                    <div class="card-content">
                        <div class="stat-number" id="totalBudget">$0</div>
                        <p>En proyectos activos</p>
                        <a href="reportes.html" class="card-link">Ver reportes</a>
                    </div>
                </div>

                <div class="dashboard-card">
                    <h3>Usuarios Activos</h3>
                    <div class="card-content">
                        <div class="stat-number" id="activeUsers">0</div>
                        <p>En el sistema</p>
                        <a href="usuarios.html" class="card-link">Administrar</a>
                    </div>
                </div>
            </div>

            <div class="recent-activity">
                <h3>Actividad Reciente</h3>
                <div id="activityList" class="activity-list">
                    <p>Cargando actividad reciente...</p>
                </div>
            </div>

            <div class="recent-activity">
                <h3>Alertas Recientes</h3>
                <div id="alertsList" class="activity-list">
                    <p>Cargando alertas...</p>
                </div>
                <div style="text-align: center; margin-top: 15px;">
                    <a href="monitoring.html" class="card-link">Ver todas las alertas</a>
                </div>
            </div>

            <div class="quick-actions">
                <h3>Acciones Rápidas</h3>
                <div class="actions-grid">
                    <button class="action-btn" onclick="window.location.href='nuevo-proyecto.html'">
                        Nuevo Proyecto
                    </button>
                    <button class="action-btn" onclick="showProjectPhasesModal()">
                        Gestión de Fases
                    </button>
                    <button class="action-btn" onclick="showProjectBudgetModal()">
                        Gestión de Presupuestos
                    </button>
                    <button class="action-btn" onclick="window.location.href='monitoring.html'">
                        Seguimiento de Recursos
                    </button>
                    <button class="action-btn" onclick="window.location.href='reports.html'">
                        📊 Reportes de Recursos
                    </button>
                    <button class="action-btn" onclick="window.location.href='products.html'">
                        📦 Catálogo de Productos
                    </button>
                    <button class="action-btn" onclick="window.location.href='solicitar-asesoria.html'">
                        Solicitar Asesoría
                    </button>
                    <button class="action-btn" onclick="window.location.href='generar-reporte.html'">
                        Generar Reporte
                    </button>
                    <button class="action-btn" onclick="window.location.href='perfil.html'">
                        Mi Perfil
                    </button>
                </div>
            </div>

            <!-- Modal para seleccionar proyecto para gestión de fases -->
            <div id="projectPhasesModal" class="modal" style="display: none;">
                <div class="modal-content">
                    <h3>Seleccionar Proyecto para Gestión de Fases</h3>
                    <div id="projectsList">
                        <p>Cargando proyectos...</p>
                    </div>
                    <button onclick="closeProjectPhasesModal()" class="action-btn" style="background: #6c757d; margin-top: 20px;">
                        Cancelar
                    </button>
                </div>
            </div>

            <!-- Modal para seleccionar proyecto para gestión de presupuestos -->
            <div id="projectBudgetModal" class="modal" style="display: none;">
                <div class="modal-content">
                    <h3>Seleccionar Proyecto para Gestión de Presupuestos</h3>
                    <div id="projectsBudgetList">
                        <p>Cargando proyectos...</p>
                    </div>
                    <button onclick="closeProjectBudgetModal()" class="action-btn" style="background: #6c757d; margin-top: 20px;">
                        Cancelar
                    </button>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 AgroTechNova - Universidad Pontificia Bolivariana</p>
        </div>
    </footer>

    <script src="assets/js/main.js"></script>
    <script src="assets/js/dashboard.js"></script>
</body>
</html>